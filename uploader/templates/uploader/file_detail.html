{% extends "uploader/base.html" %}

{% block title %}{{ file.original_name }}{% endblock %}

{% block content %}
<div class="bg-white p-6 rounded shadow-md">
    <h1 class="text-2xl font-bold mb-4">{{ file.original_name }}</h1>
    <p class="text-gray-500 mb-2">Размер: {{ file.human_size }}</p>
    <p class="text-gray-500 mb-6">Тип: {{ file.content_type }}</p>

    {% if file.is_previewable %}
        {% if file.is_image %}
            <img src="{{ file.file.url }}" alt="{{ file.original_name }}" class="max-w-full rounded mb-6 shadow">
        {% elif file.is_pdf %}
            <embed src="{{ file.file.url }}" type="application/pdf" width="100%" height="500px" class="mb-6 rounded shadow">
        {% elif file.is_text %}
            <iframe src="{{ file.file.url }}" class="w-full h-96 mb-6 rounded shadow"></iframe>
        {% endif %}
    {% else %}
        <p class="text-gray-600 italic mb-4">Превью недоступно для этого типа файла.</p>
    {% endif %}

    <div class="flex gap-4">
        <a href="{{ file.get_download_url }}"
           class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Скачать</a>
        <form action="{% url 'uploader:file_delete' file.slug %}" method="post">
            {% csrf_token %}
            <button type="submit"
                    class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition">Удалить</button>
        </form>
    </div>
</div>
{% endblock %}
