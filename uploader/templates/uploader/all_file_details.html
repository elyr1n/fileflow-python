{% extends "base.html" %}

{% block title %}FileFlow - Мои файлы{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-10">
    <h1 class="text-4xl font-extrabold mb-6 text-center text-blue-600 tracking-tight">
        Мои загруженные файлы
    </h1>

    {% if files %}
    <div class="grid gap-6 md:grid-cols-2">
        {% for file in files %}
        <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg transition">
            <div class="flex justify-between items-start">
                <div>
                    <a href="{{ file.get_view_url }}"
                       class="text-blue-600 font-medium text-lg transition-transform transition-colors duration-300 hover:text-blue-800 hover:scale-105 cursor-pointer hover:animate-file-hover"
                       title="{{ file.original_name }}">
                        {{ file.original_name|truncatechars:32 }}
                    </a>
                    <div class="text-gray-500 text-sm mt-1">{{ file.human_size }}</div>
                    <div class="text-gray-400 text-sm mt-1">
                        Загружен: {{ file.uploaded_at|date:"d.m.Y H:i" }}
                    </div>
                </div>
                <form action="{% url 'uploader:all_file_details_delete' file.slug %}" method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit"
                            class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition shadow">
                        Удалить
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center text-gray-500 italic mt-10">
        У вас пока нет загруженных файлов.
    </div>
    {% endif %}
</div>

<style>
@keyframes file-hover {
    0% { transform: scale(1) rotate(0deg); text-shadow: 0 0 0px rgba(0,0,0,0); }
    25% { transform: scale(1.03) rotate(-1deg); text-shadow: 0 0 4px rgba(59, 130, 246, 0.5); }
    50% { transform: scale(1.05) rotate(1deg); text-shadow: 0 0 6px rgba(59, 130, 246, 0.6); }
    75% { transform: scale(1.03) rotate(-1deg); text-shadow: 0 0 4px rgba(59, 130, 246, 0.5); }
    100% { transform: scale(1) rotate(0deg); text-shadow: 0 0 0px rgba(0,0,0,0); }
}

.animate-file-hover:hover {
    animation: file-hover 0.6s ease-in-out forwards;
}
</style>
{% endblock %}